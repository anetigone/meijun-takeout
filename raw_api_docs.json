{"openapi":"3.0.1","info":{"title":"APT Document","description":"APT Document","termsOfService":"https://www.mo.com","license":{"name":"Apache 2.0","url":"https://www.mo.com"},"version":"1.0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"购物车管理接口","description":"购物车相关操作接口"}],"paths":{"/api/v1/merchants/stores/{id}":{"put":{"tags":["商户管理"],"summary":"修改门店信息","operationId":"updateStore","parameters":[{"name":"id","in":"path","description":"门店ID","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"storeDTO","in":"query","description":"门店参数","required":true,"schema":{"$ref":"#/components/schemas/门店信息"}}],"responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultString"}}}}}}},"/api/v1/merchants/staff/{id}":{"put":{"tags":["商户管理"],"summary":"修改员工信息","operationId":"updateEmployee","parameters":[{"name":"id","in":"path","description":"员工ID","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"employeeDTO","in":"query","description":"员工参数","required":true,"schema":{"$ref":"#/components/schemas/员工传输对象"}}],"responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultString"}}}}}},"delete":{"tags":["商户管理"],"summary":"删除员工","operationId":"deleteEmployee","parameters":[{"name":"id","in":"path","description":"员工ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultString"}}}}}}},"/api/v1/merchants/orders/{orderId}/status":{"put":{"tags":["商户管理"],"summary":"获取订单详情","description":"获取指定订单的详细信息","operationId":"updateOrderStatus","parameters":[{"name":"orderId","in":"path","description":"订单ID","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"status","in":"query","description":"订单状态","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Order"}}}}}}},"/api/v1/cart/update":{"put":{"tags":["购物车管理接口"],"summary":"更新购物车商品信息","description":"更新用户购物车中指定商品的信息","operationId":"updateCartItem","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/购物车项信息"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultString"}}}}}}},"/api/v1/orders/comment":{"post":{"tags":["订单管理"],"summary":"获取订单分页","operationId":"saveOrderComment","parameters":[{"name":"orderCommentDTO","in":"query","required":true,"schema":{"$ref":"#/components/schemas/订单评价参数"}},{"name":"orderCommentQueryDTO","in":"query","schema":{"$ref":"#/components/schemas/订单评价参数"}}],"responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/OrderComment"}}}}}}},"/api/v1/orders/after-sale":{"post":{"tags":["订单管理"],"summary":"保存订单评价","operationId":"applyForAfterSale","parameters":[{"name":"afterSaleDTO","in":"query","required":true,"schema":{"$ref":"#/components/schemas/售后信息"}},{"name":"orderAfterSaleDTO","in":"query","description":"订单售后参数","required":true,"schema":{"$ref":"#/components/schemas/售后信息"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultString"}}}}}}},"/api/v1/merchants/staff":{"get":{"tags":["商户管理"],"summary":"获取所有员工","operationId":"getEmployee","responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Employee"}}}}}},"post":{"tags":["商户管理"],"summary":"保存员工信息","operationId":"saveEmployee","parameters":[{"name":"employeeDTO","in":"query","required":true,"schema":{"$ref":"#/components/schemas/员工传输对象"}},{"name":"employee","in":"query","schema":{"$ref":"#/components/schemas/Employee"}}],"responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Employee"}}}}}}},"/api/v1/cart/add":{"post":{"tags":["购物车管理接口"],"summary":"添加商品到购物车","description":"将指定商品添加到用户购物车","operationId":"addToCart","parameters":[{"name":"CartItem","in":"query","description":"购物车商品参数","required":true,"schema":{"$ref":"#/components/schemas/购物车项"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/购物车项信息"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultString"}}}}}}},"/api/v1/auth/register":{"post":{"tags":["账号管理"],"summary":"微信小程序登录","operationId":"register","parameters":[{"name":"AuthRegisterDTO","in":"query","description":"注册参数","required":true,"schema":{"$ref":"#/components/schemas/注册请求参数"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/注册请求参数"}}},"required":true},"responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/用户"}}}}}}},"/api/v1/auth/refresh-token":{"post":{"tags":["账号管理"],"summary":"刷新jwt","operationId":"refreshToken","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultString"}}}}}}},"/api/v1/auth/mp/login":{"post":{"tags":["账号管理"],"summary":"微信小程序登录","operationId":"mpLogin","parameters":[{"name":"loginData","in":"query","description":"登录参数","required":true,"schema":{"type":"string"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"string","description":"登录参数"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result登录返回参数"}}}}}}},"/api/v1/auth/logout":{"post":{"tags":["账号管理"],"summary":"退出登录","operationId":"logout","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultString"}}}}}}},"/api/v1/auth/login":{"post":{"tags":["账号管理"],"summary":"登录","operationId":"login","parameters":[{"name":"AuthLoginDTO","in":"query","description":"登录参数","required":true,"schema":{"$ref":"#/components/schemas/登录信息"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/登录信息"}}},"required":true},"responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/登录返回参数"}}}}}}},"/api/v1/user/info":{"get":{"tags":["用户管理"],"summary":"获取用户信息","operationId":"info","responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/用户"}}}}}}},"/api/v1/orders/{orderId}":{"get":{"tags":["订单管理"],"summary":"获取订单详情","operationId":"getOrderById","parameters":[{"name":"orderId","in":"path","description":"订单ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Order"}}}}}}},"/api/v1/orders/page":{"get":{"tags":["订单管理"],"summary":"获取订单分页","operationId":"getPage","parameters":[{"name":"orderPageQueryDTO","in":"query","required":true,"schema":{"$ref":"#/components/schemas/订单分页查询参数"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageResult"}}}}}}},"/api/v1/orders/overview":{"get":{"tags":["订单管理"],"summary":"获取订单列表","operationId":"getAll","responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Order"}}}}}}},"/api/v1/merchants/{orderId}":{"get":{"tags":["商户管理"],"summary":"获取商户订单列表","operationId":"getOrderById_1","parameters":[{"name":"orderId","in":"path","description":"订单ID","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Order"}}}}}}},"/api/v1/merchants/stores":{"get":{"tags":["商户管理"],"summary":"获取门店列表","operationId":"getStore","responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Store"}}}}}}},"/api/v1/merchants/staff/page":{"get":{"tags":["商户管理"],"summary":"获取员工分页","operationId":"getEmployeePage","parameters":[{"name":"employeePageQueryDTO","in":"query","required":true,"schema":{"$ref":"#/components/schemas/员工分页查询参数"}}],"responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Employee"}}}}}}},"/api/v1/dishes/page":{"get":{"tags":["菜品管理"],"summary":"获取菜品分页","operationId":"getPage_1","parameters":[{"name":"dishPageQueryDTO","in":"query","required":true,"schema":{"$ref":"#/components/schemas/菜品分页查询"}}],"responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/PageResult"}}}}}}},"/api/v1/dishes/categories":{"get":{"tags":["菜品管理"],"summary":"获取菜品分类","operationId":"getCategories","responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/api/v1/coupons":{"get":{"tags":["优惠券管理接口"],"summary":"获取优惠券","description":"获取用户优惠券","operationId":"getCoupons","responses":{"200":{"description":"成功","content":{"*/*":{"schema":{"$ref":"#/components/schemas/优惠券信息"}}}}}}},"/api/v1/cart":{"get":{"tags":["购物车管理接口"],"summary":"获取购物车","description":"获取用户最后创建的购物车","operationId":"getCart","responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result购物车"}}}}}}},"/api/v1/cart/delete":{"delete":{"tags":["购物车管理接口"],"summary":"从购物车删除商品","description":"从用户购物车中删除指定商品","operationId":"deleteCartItem","parameters":[{"name":"cartItemId","in":"query","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ResultString"}}}}}}}},"components":{"schemas":{"门店信息":{"type":"object"},"ResultString":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"msg":{"type":"string"},"data":{"type":"string"}}},"员工传输对象":{"type":"object","properties":{"id":{"type":"integer","description":"员工id","format":"int64"},"username":{"type":"string","description":"用户名"},"password":{"type":"string","description":"密码"},"name":{"type":"string","description":"姓名"},"phoneNum":{"type":"string","description":"手机号"},"gender":{"type":"string","description":"性别"},"idNumber":{"type":"string","description":"身份证号"},"merchantId":{"type":"integer","description":"商家id","format":"int64"}}},"Order":{"type":"object","properties":{"id":{"type":"string","description":"订单ID"},"userId":{"type":"string","description":"用户id"},"merchantId":{"type":"string","description":"商户id"},"orderTime":{"type":"string","description":"下单时间","format":"date-time"},"status":{"type":"string","description":"订单状态","enum":["PENDING","COMPLETED","CANCELED","UNPAID","PAID"]},"totalAmount":{"type":"number","description":"总金额"},"items":{"type":"array","description":"订单项列表","items":{"$ref":"#/components/schemas/OrderItem"}}},"description":"订单"},"OrderItem":{"type":"object","properties":{"id":{"type":"integer","description":"订单项id","format":"int64"},"orderId":{"type":"string","description":"订单id"},"项id":{"type":"string","description":"订单项的内容"},"项类型":{"type":"string","description":"订单项的内容类型","enum":["DISH","SET_MEAL"]},"quantity":{"type":"integer","description":"数量","format":"int32"},"unitPrice":{"type":"number","description":"单价"},"totalPrice":{"type":"number","description":"总价"}},"description":"订单项"},"购物车项信息":{"type":"object","properties":{"userId":{"type":"integer","description":"用户id","format":"int64"},"quantity":{"type":"integer","description":"购物车项数量","format":"int32"},"itemType":{"type":"string","description":"购物车项类型","enum":["DISH","SET_MEAL"]},"itemId":{"type":"integer","format":"int64"}}},"订单评价参数":{"type":"object","properties":{"id":{"type":"integer","description":"订单评价id","format":"int64"},"orderId":{"type":"integer","description":"订单id","format":"int64"},"comment":{"type":"string","description":"订单评价内容"}}},"OrderComment":{"type":"object","properties":{"id":{"type":"integer","description":"订单评价id","format":"int64"},"orderId":{"type":"integer","description":"订单id","format":"int64"},"content":{"type":"string","description":"内容"}},"description":"订单评价"},"售后信息":{"type":"object"},"Employee":{"type":"object","properties":{"id":{"type":"integer","description":"主键","format":"int64"},"uuid":{"type":"string","description":"用户唯一标识"},"openid":{"type":"string","description":"openid"},"name":{"type":"string","description":"姓名"},"username":{"type":"string","description":"用户名"},"password":{"type":"string","description":"密码"},"identity":{"type":"string","enum":["ADMIN","MERCHANT","EMPLOYEE","CUSTOMER"]},"status":{"type":"integer","description":"状态 0 禁用 1 启用","format":"int32"},"phoneNum":{"type":"string","description":"手机号"},"gender":{"type":"string","description":"性别"},"address":{"type":"string","description":"地址"},"merchantId":{"type":"integer","description":"商家id","format":"int64"},"avatar_url":{"type":"string","description":"头像"},"token":{"type":"string","description":"jwt令牌"},"createTime":{"type":"string","format":"date-time"},"updateTime":{"type":"string","format":"date-time"},"merchant_id":{"type":"integer","format":"int64"}}},"购物车项":{"type":"object","properties":{"id":{"type":"integer","description":"购物车项id","format":"int64"},"cartId":{"type":"integer","description":"购物车id","format":"int64"},"userId":{"type":"integer","description":"用户id","format":"int64"},"itemId":{"type":"integer","description":"购物车项类型","format":"int64"},"itemType":{"type":"string","description":"购物车项类型","enum":["DISH","SET_MEAL"]},"quantity":{"type":"integer","description":"购物车项数量","format":"int32"}}},"注册请求参数":{"type":"object","properties":{"用户名":{"type":"string"},"密码":{"type":"string"},"身份":{"type":"string","enum":["ADMIN","MERCHANT","EMPLOYEE","CUSTOMER"]},"手机号":{"type":"string"},"性别":{"type":"string"},"头像":{"type":"string"},"openid":{"type":"string"},"地址":{"type":"string"},"商家用户名":{"type":"string"}}},"用户":{"type":"object","properties":{"id":{"type":"integer","description":"主键","format":"int64"},"uuid":{"type":"string","description":"用户唯一标识"},"openid":{"type":"string","description":"openid"},"name":{"type":"string","description":"姓名"},"username":{"type":"string","description":"用户名"},"password":{"type":"string","description":"密码"},"identity":{"type":"string","description":"用户身份","enum":["ADMIN","MERCHANT","EMPLOYEE","CUSTOMER"]},"status":{"type":"integer","description":"状态 0 禁用 1 启用","format":"int32"},"phoneNum":{"type":"string","description":"手机号"},"gender":{"type":"string","description":"性别"},"address":{"type":"string","description":"地址"},"merchantId":{"type":"integer","description":"商家id","format":"int64"},"avatar_url":{"type":"string","description":"头像"},"token":{"type":"string","description":"jwt令牌"},"createTime":{"type":"string","format":"date-time"},"updateTime":{"type":"string","format":"date-time"}},"description":"用户基础类"},"Result登录返回参数":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"msg":{"type":"string"},"data":{"$ref":"#/components/schemas/登录返回参数"}}},"登录返回参数":{"type":"object","properties":{"id":{"type":"integer","description":"主键值","format":"int64"},"username":{"type":"string","description":"用户名"},"name":{"type":"string","description":"姓名"},"uuid":{"type":"string","description":"唯一标识"},"token":{"type":"string","description":"jwt令牌"}}},"登录信息":{"type":"object","properties":{"username":{"type":"string","description":"用户名"},"password":{"type":"string","description":"密码"},"code":{"type":"string","description":"验证码"},"identity":{"type":"string","description":"用户身份","enum":["ADMIN","MERCHANT","EMPLOYEE","CUSTOMER"]}}},"订单分页查询参数":{"type":"object","properties":{"page":{"type":"integer","description":"页码","format":"int32"},"size":{"type":"integer","description":"每页数据量","format":"int32"},"status":{"type":"integer","description":"订单状态","format":"int32"},"uuid":{"type":"string","description":"用户id"},"beginTime":{"type":"string","format":"date-time"},"endTime":{"type":"string","format":"date-time"}}},"PageResult":{"type":"object","properties":{"total":{"type":"integer","format":"int64"},"records":{"type":"array","items":{"type":"object"}},"current":{"type":"integer","format":"int32"},"size":{"type":"integer","format":"int32"},"code":{"type":"integer","format":"int32"},"msg":{"type":"string"}}},"Store":{"type":"object","properties":{"id":{"type":"integer","description":"门店id","format":"int64"},"merchantId":{"type":"integer","description":"商户id","format":"int64"},"name":{"type":"string","description":"门店名称"},"address":{"type":"string","description":"门店地址"},"info":{"type":"string","description":"门店简介"},"createTime":{"type":"string","format":"date-time"},"updateTime":{"type":"string","format":"date-time"}},"description":"门店信息"},"员工分页查询参数":{"type":"object","properties":{"name":{"type":"string","description":"员工姓名"},"pageNum":{"type":"integer","description":"页码","format":"int32"},"pageSize":{"type":"integer","description":"每页显示记录数","format":"int32"}}},"菜品分页查询":{"type":"object","properties":{"pageNum":{"type":"integer","description":"页码","format":"int32"},"pageSize":{"type":"integer","description":"每页数据量","format":"int32"},"name":{"type":"string","description":"菜品名称"},"categoryId":{"type":"integer","description":"菜品分类id","format":"int32"},"status":{"type":"integer","description":"菜品状态 0表示禁用 1表示启用","format":"int32"}}},"优惠券信息":{"type":"object","properties":{"id":{"type":"integer","description":"主键","format":"int64"},"userId":{"type":"integer","description":"用户id","format":"int64"},"name":{"type":"string","description":"优惠券名称"},"description":{"type":"string","description":"优惠券描述"},"type":{"type":"string","description":"优惠券类型","enum":["FIXED","PERCENTAGE"]},"value":{"type":"number","description":"优惠券金额"},"minAmount":{"type":"number","description":"优惠券使用门槛"},"maxAmount":{"type":"number","description":"优惠券最大金额"},"startTime":{"type":"string","format":"date-time"},"endTime":{"type":"string","format":"date-time"},"createTime":{"type":"string","format":"date-time"},"updateTime":{"type":"string","format":"date-time"}}},"Result购物车":{"type":"object","properties":{"code":{"type":"integer","format":"int32"},"msg":{"type":"string"},"data":{"$ref":"#/components/schemas/购物车"}}},"购物车":{"type":"object","properties":{"id":{"type":"integer","description":"购物车id","format":"int64"},"userId":{"type":"integer","description":"用户id","format":"int64"},"items":{"type":"array","description":"购物车项","items":{"$ref":"#/components/schemas/购物车项"}},"createTime":{"type":"string","format":"date-time"},"updateTime":{"type":"string","format":"date-time"}}}}},"x-openapi":{"x-setting":{"customCode":200,"language":"zh-CN","enableSwaggerModels":true,"swaggerModelName":"Swagger Models","enableReloadCacheParameter":false,"enableAfterScript":true,"enableDocumentManage":true,"enableVersion":false,"enableRequestCache":true,"enableFilterMultipartApis":false,"enableFilterMultipartApiMethodType":"POST","enableHost":false,"enableHostText":"","enableDynamicParameter":false,"enableDebug":true,"enableFooter":true,"enableFooterCustom":false,"enableSearch":true,"enableOpenApi":true,"enableHomeCustom":false,"enableGroup":true,"enableResponseCode":true},"x-markdownFiles":[]}}